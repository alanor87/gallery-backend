"use strict";(self.webpackChunkgallery_frontend=self.webpackChunkgallery_frontend||[]).push([[728],{728:function(i,e,a){a.r(e),a.d(e,{default:function(){return Z}});var t=a(5531),s=a(3032),n=a(3430),o=a(4322),u=a.n(o),r=a(2791),c=a(4810),m=a(5832),l=a(3241),d=a(1539),p=a(2574),f=a(5412),g=a(9293),b="ModalImage_modalImage__0CAfI",x="ModalImage_imagePart__JnNhA",h="ModalImage_nonImagePart__u9pP+",I="ModalImage_modalImageHeader__ggnak",_="ModalImage_imageTitleWrapper__d2Lkj",v="ModalImage_modalImageLikeBtn__ghxPD",q="ModalImage_modalImageMenu__pMd0+",j="ModalImage_tagListWrapper__4Q-Kw",M="ModalImage_description__36ntf",k=a(184),Z=function(){var i=g.Z.imagesStoreSettings,e=i.fetchImageById,a=i.editImagesInfo,o=i.getCurrentGalleryMode,Z=g.Z.modalWindowsSettings,y=Z.modalImageId,E=Z.setModalImageId,C=Z.setModalOpen,L=Z.setModalComponentType,S=g.Z.userSettings,N=S.userIsAuthenticated,D=S.userName,w=(0,r.useState)(),V=(0,n.Z)(w,2),P=V[0],T=V[1],B=(0,r.useState)(!1),R=(0,n.Z)(B,2),A=R[0],O=R[1],z=(0,r.useState)(!0),G=(0,n.Z)(z,2),W=G[0],$=G[1],H=(0,r.useState)(!1),F=(0,n.Z)(H,2),J=F[0],K=F[1],Q=(0,r.useState)(!1),U=(0,n.Z)(Q,2),X=U[0],Y=U[1],ii=(0,r.useState)(!1),ei=(0,n.Z)(ii,2),ai=ei[0],ti=ei[1],si=(0,r.useCallback)((function(){return e(y).then((function(i){T(i)}))}),[]);(0,r.useEffect)((function(){si()}),[y,e,si]);var ni=function(){var i=(0,s.Z)(u().mark((function i(){var e,s,n;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e=P._id,s=P.imageInfo.likes,O(!0),n=[],n=s.includes(D)?s.filter((function(i){return i!==D})):[].concat((0,t.Z)(s),[D]),i.next=7,a([{_id:e,imageInfo:{likes:n}}]);case 7:si(),O(!1);case 9:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}(),oi=function(){var i=(0,s.Z)(u().mark((function i(e){var t;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=P._id,O(!0),i.next=4,a([{_id:t,imageInfo:{tags:e}}]);case 4:si(),O(!1);case 6:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}(),ui="userGallery"===o;return P?(0,k.jsxs)("div",{className:b,children:[(0,k.jsxs)("div",{className:x,children:[W&&(0,k.jsx)(c.$j,{side:50}),(0,k.jsx)("img",{src:null===P||void 0===P?void 0:P.imageURL,alt:"God save the queen!",onLoad:function(){$(!1)},style:{visibility:W?"hidden":"visible"}})]}),(0,k.jsxs)("div",{className:h,children:[(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:I,children:[(0,k.jsxs)("div",{className:_,children:[(0,k.jsx)(c.zx,{type:"button",icon:"icon_like",onClick:ni,className:v,text:P.imageInfo.likes.length,disabled:!N,title:"Like / Dislike"}),(0,k.jsx)("h2",{children:"Image title"}),(0,k.jsx)(c.zx,{type:"button",title:"Close tag editor",className:"closeBtn",icon:"icon_close",iconSize:30,onClick:function(){C(!1),L("none")}})]}),N&&ui&&(0,k.jsx)(l.Z,{className:q,modalImageMode:!0,onShare:function(){Y(!0)},onDelete:function(){ti(!0)}})]}),(0,k.jsxs)("div",{className:M,children:[(0,k.jsx)("div",{className:j,children:P.imageInfo.tags.length>0&&(0,k.jsx)(m.Z,{tags:P.imageInfo.tags,isEditable:ui,onDoubleClick:function(){K(!0)}})}),(0,k.jsx)("p",{children:"Description of the image. Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum accusamus hic distinctio nesciunt temporibus accusantium aliquam quisquam eligendi eveniet enim facilis nisi ad officiis qui, iusto blanditiis labore exercitationem. Voluptatem consectetur molestiae nemo debitis maiores ab tenetur, natus excepturi. Maiores ex hic assumenda molestias rem minima laborum labore natus animi eum. Explicabo ipsam temporibus molestias assumenda numquam officiis sint amet placeat. Eos minus aliquam ratione illo dicta, distinctio a adipisci, rerum hic ex pariatur corrupti odit sit nesciunt accusamus! Minus sunt error sint? Est veritatis possimus nobis placeat. Vel nostrum facilis soluta adipisci explicabo ratione aliquam mollitia reprehenderit delectus neque."}),(0,k.jsx)("p",{children:"Description of the image. Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum accusamus hic distinctio nesciunt temporibus accusantium aliquam quisquam eligendi eveniet enim facilis nisi ad officiis qui, iusto blanditiis labore exercitationem. Voluptatem consectetur molestiae nemo debitis maiores ab tenetur, natus excepturi. Maiores ex hic assumenda molestias rem minima laborum labore natus animi eum. Explicabo ipsam temporibus molestias assumenda numquam officiis sint amet placeat. Eos minus aliquam ratione illo dicta, distinctio a adipisci, rerum hic ex pariatur corrupti odit sit nesciunt accusamus! Minus sunt error sint? Est veritatis possimus nobis placeat. Vel nostrum facilis soluta adipisci explicabo ratione aliquam mollitia reprehenderit delectus neque."}),(0,k.jsx)("p",{children:"Description of the image. Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum accusamus hic distinctio nesciunt temporibus accusantium aliquam quisquam eligendi eveniet enim facilis nisi ad officiis qui, iusto blanditiis labore exercitationem. Voluptatem consectetur molestiae nemo debitis maiores ab tenetur, natus excepturi. Maiores ex hic assumenda molestias rem minima laborum labore natus animi eum. Explicabo ipsam temporibus molestias assumenda numquam officiis sint amet placeat. Eos minus aliquam ratione illo dicta, distinctio a adipisci, rerum hic ex pariatur corrupti odit sit nesciunt accusamus! Minus sunt error sint? Est veritatis possimus nobis placeat. Vel nostrum facilis soluta adipisci explicabo ratione aliquam mollitia reprehenderit delectus neque."}),(0,k.jsx)("p",{children:"Description of the image. Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum accusamus hic distinctio nesciunt temporibus accusantium aliquam quisquam eligendi eveniet enim facilis nisi ad officiis qui, iusto blanditiis labore exercitationem. Voluptatem consectetur molestiae nemo debitis maiores ab tenetur, natus excepturi. Maiores ex hic assumenda molestias rem minima laborum labore natus animi eum. Explicabo ipsam temporibus molestias assumenda numquam officiis sint amet placeat. Eos minus aliquam ratione illo dicta, distinctio a adipisci, rerum hic ex pariatur corrupti odit sit nesciunt accusamus! Minus sunt error sint? Est veritatis possimus nobis placeat. Vel nostrum facilis soluta adipisci explicabo ratione aliquam mollitia reprehenderit delectus neque."})]})]}),A&&(0,k.jsx)(c.$j,{side:50})]}),X&&(0,k.jsx)(d.Z,{_id:P._id,isPublic:P.imageInfo.isPublic,openedTo:P.imageInfo.openedTo,sharedByLink:P.imageInfo.sharedByLink,setIsLoading:O,onCloseShareOverlay:function(){si(),Y(!1)}}),ai&&(0,k.jsx)(p.Z,{_id:P._id,onCloseDeleteOverlay:function(){return ti(!1)},onConfirmDeleteOverlay:function(){E(""),L("none"),C(!1)}}),J&&(0,k.jsx)(f.Z,{tags:P.imageInfo.tags,onAddTags:function(i){var e=i.split(/,/).map((function(i){return i.trim()}));oi([].concat((0,t.Z)(P.imageInfo.tags),(0,t.Z)(e)))},onTagDelete:function(i){var e=P.imageInfo.tags.filter((function(e){return e!==i}));oi(e)},closeHandle:function(){return K(!1)}})]}):(0,k.jsx)(c.$j,{side:50})}}}]);
//# sourceMappingURL=728.513399ef.chunk.js.map